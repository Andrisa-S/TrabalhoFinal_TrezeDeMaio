<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: cabecalho}"></head>
<body>
<nav th:replace="~{fragments/layout :: navbar}"></nav>

<div class="container">

    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px;">
        <h2 style="margin: 0; color: var(--primary-color);">Detalhes do Item Hist√≥rico</h2>
        <a href="/acervo" class="btn-cancelar">‚¨Ö Voltar para o Acervo</a>
    </div>

    <div class="detalhes-card">

        <div class="detalhes-capa">
            üèõÔ∏è
        </div>

        <div class="detalhes-info">

            <h1 th:text="${acervo.tipoItem}">Tipo do Item</h1>

            <div class="grid-info">
                <div class="info-item">
                    <span class="label">ID de Registro:</span>
                    <span class="valor" th:text="${acervo.id}">1</span>
                </div>

                <div class="info-item">
                    <span class="label">Ano do Item:</span>
                    <span class="valor" th:text="${acervo.anoItem}">1950</span>
                </div>

                <div class="info-item" style="grid-column: span 2;">
                    <span class="label">Doador:</span>
                    <span class="valor">
                        <span th:if="${acervo.doador != null}" th:text="${acervo.doador.nome}">Nome Doador</span>
                        <span th:if="${acervo.doador == null}" style="color: #999;">Doador n√£o informado</span>
                    </span>
                    <small th:if="${acervo.doador != null}" style="color: #666; font-size: 0.8rem;" th:text="${acervo.doador.contato}"></small>
                </div>
            </div>

            <div style="margin-top: 20px;">
                <span class="label">Descri√ß√£o Detalhada:</span>
                <p style="background: #f9f9f9; padding: 15px; border-radius: 4px; border: 1px solid #eee; line-height: 1.6; margin-top: 5px;"
                   th:text="${acervo.descricao}">
                    Descri√ß√£o do item...
                </p>
            </div>

            <div style="margin-top: 20px; border-top: 1px dashed #ccc; padding-top: 15px;"
                 th:if="${acervo.caminhoItem != null and acervo.caminhoItem != ''}">

                <span class="label">Arquivo Digitalizado:</span>
                <p style="font-family: monospace; color: #555; margin-bottom: 10px;">
                    üìÇ <span th:text="${acervo.caminhoItem}">caminho/do/arquivo.jpg</span>
                </p>

                <div th:if="${#strings.endsWith(#strings.toLowerCase(acervo.caminhoItem), '.jpg') or
                              #strings.endsWith(#strings.toLowerCase(acervo.caminhoItem), '.png') or
                              #strings.endsWith(#strings.toLowerCase(acervo.caminhoItem), '.jpeg')}">
                    <img th:src="'file://' + ${acervo.caminhoItem}"
                         style="max-width: 100%; border-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);"
                         alt="Preview indispon√≠vel (Seguran√ßa do Navegador)" />
                    <small style="display:block; color:#999; margin-top:5px;">* Se a imagem n√£o aparecer, √© bloqueio de seguran√ßa do navegador para arquivos locais.</small>
                </div>
            </div>

            <div style="margin-top: 30px; display: flex; gap: 10px;">
                <a th:href="@{/acervo/editar/{id}(id=${acervo.id})}" class="btn-salvar" style="text-decoration: none;">‚úèÔ∏è Editar Item</a>

                <a th:href="@{/acervo/excluir/{id}(id=${acervo.id})}"
                   class="btn-excluir"
                   style="padding: 10px 20px; font-size: 1rem;"
                   onclick="return confirm('Tem certeza que deseja excluir este item hist√≥rico permanentemente?')">üóëÔ∏è Excluir Item</a>
            </div>

        </div>
    </div>
</div>

<style>
    .detalhes-card {
        display: flex;
        gap: 30px;
        background: white;
        padding: 0;
    }

    /* Responsividade para celular: empilha em vez de lado a lado */
    @media (max-width: 768px) {
        .detalhes-card { flex-direction: column; }
        .detalhes-capa { width: 100%; height: 150px; }
    }

    .detalhes-capa {
        width: 250px;
        min-height: 350px;
        background-color: #f4f4f4; /* Fundo cinza suave */
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 6rem;
        border-radius: 8px;
        border: 1px solid #ddd;
        flex-shrink: 0;
    }

    .detalhes-info {
        flex: 1; /* Ocupa o resto do espa√ßo */
    }

    .detalhes-info h1 {
        margin-top: 0;
        color: var(--primary-color);
        font-size: 2rem;
        border-bottom: 2px solid var(--secondary-color);
        padding-bottom: 10px;
        display: inline-block;
    }

    .grid-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 20px;
        background-color: #fdfdfd;
        padding: 20px;
        border-radius: 8px;
        border: 1px solid #eee;
    }

    .info-item {
        display: flex;
        flex-direction: column;
    }

    .label {
        font-size: 0.85rem;
        color: #777;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: bold;
        margin-bottom: 4px;
    }

    .valor {
        font-size: 1.1rem;
        color: #333;
        font-weight: 500;
    }
</style>
</body>
</html>